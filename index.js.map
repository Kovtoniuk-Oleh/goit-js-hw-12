{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\n// Описаний у документації\r\nimport iziToast from \"izitoast\";\r\n// Додатковий імпорт стилів\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\n\r\nconst API_KEY = \"50866984-6402497f149a27b4d4d3393ca\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\n\r\nexport async function getImagesByQuery(query) {\r\n  try {\r\n    const response = await axios.get(BASE_URL, {\r\n      params: {\r\n        key: API_KEY,\r\n        q: query,\r\n        image_type: \"photo\",\r\n        orientation: \"horizontal\",\r\n        safesearch: true,\r\n      },\r\n    });\r\n    return response.data.hits;\r\n  } catch (error) {\r\n    console.error(\"Error fetching images:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst gallery = document.querySelector(\".gallery\");\r\nlet lightbox;\r\n\r\n// export function createGallery(images) {\r\n//   const markup = images\r\n//     .map(\r\n//       ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\r\n//       <a class=\"gallery-item\" href=\"${largeImageURL}\">\r\n//         <img src=\"${webformatURL}\" alt=\"${tags}\" />\r\n        \r\n//         <div class=\"info\">\r\n        \r\n//           <p> Likes ${likes}</p>\r\n//         <p> Views ${views}</p>\r\n//         <p> Comments ${comments}</p>\r\n//         <p> Downloads ${downloads}</p>\r\n\r\n//         </div>\r\n//       </a>`\r\n//     )\r\n//     .join(\"\");\r\n\r\n//   gallery.innerHTML = markup;\r\n//   lightbox = new SimpleLightbox(\".gallery a\");\r\n//   lightbox.refresh();\r\n// }\r\nexport function createGallery(images) {\r\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\r\n      <a class=\"gallery-item\" href=\"${largeImageURL}\">\r\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\r\n        \r\n        <div class=\"image-info\">\r\n          <div class=\"stat-item\"><span class=\"stat-label\"> Likes </span> <span class=\"stat-value\">${likes}</span></div>\r\n          <div class=\"stat-item\"><span class=\"stat-label\"> Views </span> <span class=\"stat-value\">${views}</span></div>\r\n          <div class=\"stat-item\"><span class=\"stat-label\"> Comments </span> <span class=\"stat-value\">${comments}</span></div>\r\n          <div class=\"stat-item\"><span class=\"stat-label\"> Downloads </span> <span class=\"stat-value\">${downloads}</span></div>\r\n        </div>\r\n      </a>\r\n    `).join(\"\");\r\n  \r\n    gallery.innerHTML = markup;\r\n    lightbox = new SimpleLightbox(\".gallery a\");\r\n    lightbox.refresh();\r\n  }\r\n  \r\n\r\n\r\nexport function clearGallery() {\r\n  gallery.innerHTML = \"\";\r\n}\r\n\r\nexport function showLoader() {\r\n    const loader = document.querySelector(\".loader\");\r\n    console.log(\"Loader element:\", loader); // Перевіряємо, чи знайшлося\r\n    if (loader) {\r\n      loader.classList.add(\"visible\");\r\n    } else {\r\n      console.error(\"Loader element not found!\");\r\n    }\r\n  }\r\n\r\nexport function hideLoader() {\r\n  document.querySelector(\".loader\").classList.remove(\"visible\");\r\n}","\r\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\r\nimport { createGallery, clearGallery, showLoader, hideLoader } from \"./js/render-functions.js\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst form = document.querySelector(\".form\");\r\nconst searchInput = document.querySelector(\"input[name='search-text']\");\r\n\r\n// покращений код, Обгортання логіки в try...catch...finally\r\n\r\nform.addEventListener(\"submit\", async (event) => {\r\n  event.preventDefault();\r\n\r\n  const query = searchInput.value.trim();\r\n  if (!query) {\r\n      iziToast.error({ message: \"Please enter a search term!\" });\r\n      return;\r\n  }\r\n\r\n  clearGallery();\r\n  showLoader();\r\n\r\n  try {\r\n      const images = await getImagesByQuery(query);\r\n      console.log(\"Fetched images:\", images); // Додаємо логування!\r\n\r\n      if (images.length === 0) {\r\n          iziToast.warning({ message: \"Sorry, there are no images matching your search query. Please try again!\" });\r\n      } else {\r\n          createGallery(images);\r\n      }\r\n  } catch (error) {\r\n      iziToast.error({ message: \"An error occurred while fetching images. Please try again later.\" });\r\n      console.error(\"Error fetching images:\", error);\r\n  } finally {\r\n      hideLoader();\r\n  }\r\n\r\n  searchInput.value = \"\"; // ✨ Очищаємо поле пошуку після запиту\r\n});\r\n\r\n\r\n\r\n\r\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","axios","error","gallery","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","form","searchInput","event","iziToast"],"mappings":"+vBASA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAO,CAC5C,GAAI,CAUF,OATiB,MAAMC,EAAM,IAAIH,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACP,CAAK,GACe,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,EACR,CACH,CCzBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAyBG,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,sCACtEL,CAAa;AAAA,oBAC/BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,oGAGsDC,CAAK;AAAA,oGACLC,CAAK;AAAA,uGACFC,CAAQ;AAAA,wGACPC,CAAS;AAAA;AAAA;AAAA,KAG5G,EAAE,KAAK,EAAE,EAEVX,EAAQ,UAAYI,EACpBH,EAAW,IAAIW,EAAe,YAAY,EAC1CX,EAAS,QAAO,CACjB,CAII,SAASY,GAAe,CAC7Bb,EAAQ,UAAY,EACtB,CAEO,SAASc,GAAa,CACzB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/C,QAAQ,IAAI,kBAAmBA,CAAM,EACjCA,EACFA,EAAO,UAAU,IAAI,SAAS,EAE9B,QAAQ,MAAM,2BAA2B,CAE5C,CAEI,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,SAAS,CAC9D,CC5DA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,2BAA2B,EAItED,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAC/CA,EAAM,eAAc,EAEpB,MAAMtB,EAAQqB,EAAY,MAAM,KAAI,EACpC,GAAI,CAACrB,EAAO,CACRuB,EAAS,MAAM,CAAE,QAAS,6BAA+B,CAAA,EACzD,MACH,CAEDP,IACAC,IAEA,GAAI,CACA,MAAMX,EAAS,MAAMP,EAAiBC,CAAK,EAC3C,QAAQ,IAAI,kBAAmBM,CAAM,EAEjCA,EAAO,SAAW,EAClBiB,EAAS,QAAQ,CAAE,QAAS,0EAA4E,CAAA,EAExGlB,EAAcC,CAAM,CAE3B,OAAQJ,EAAO,CACZqB,EAAS,MAAM,CAAE,QAAS,kEAAoE,CAAA,EAC9F,QAAQ,MAAM,yBAA0BrB,CAAK,CACnD,QAAY,CACNiB,GACH,CAEDE,EAAY,MAAQ,EACtB,CAAC"}